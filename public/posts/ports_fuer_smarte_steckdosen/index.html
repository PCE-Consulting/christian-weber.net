<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Firewall Ports für diverse smarte Steckdosen | Christian Weber</title>
<meta name=keywords content="Firewall,OPNSense,Smarte Steckdosen,Hama,Amazon Echo,Smartlife,Tuya,Smarthome"><meta name=description content="Smarte Geräte im Heimnetzwerk benötigen bestimmte geöffnete Ports an einer FIrewall, damit die Geräte kommunizieren können. Hier findest du eine kleine Auswahl."><meta name=author content="Christian Weber"><link rel=canonical href=https://www.christian-weber.net/posts/ports_fuer_smarte_steckdosen/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/ports_fuer_smarte_steckdosen/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Christian Weber (Alt + H)">Christian Weber</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/posts/ title=posts><span>posts</span></a></li><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Firewall Ports für diverse smarte Steckdosen</h1><div class=post-description>Smarte Geräte im Heimnetzwerk benötigen bestimmte geöffnete Ports an einer FIrewall, damit die Geräte kommunizieren können. Hier findest du eine kleine Auswahl.</div><div class=post-meta><span title='2024-09-27 23:05:03 +0000 +0000'>September 27, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;622 words&nbsp;·&nbsp;Christian Weber</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#wie-man-kurzerhand-das-halbe-haus-lahmlegt>Wie man kurzerhand das halbe Haus lahmlegt</a></li><li><a href=#die-ewige-suche-nach-den-richtigen-ports>Die ewige Suche nach den richtigen Ports</a></li><li><a href=#die-liste-mit-allen-ports>Die Liste mit allen Ports</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=wie-man-kurzerhand-das-halbe-haus-lahmlegt>Wie man kurzerhand das halbe Haus lahmlegt<a hidden class=anchor aria-hidden=true href=#wie-man-kurzerhand-das-halbe-haus-lahmlegt>#</a></h3><p>Vor etwa vier Wochen habe ich mir aus Komponenten, die ich noch auf Lager hatte, eine kleine Firewall in einem 1U 19" Gehäuse gebaut. Hintergrund ist, dass ich Kunden übernommen habe, die alte Sophos Firewalls im Einsatz haben. Bei einem Kunden ist sogar der bisherige IT-Verantwortliche verstorben und hat mangels Dokumentation diverse Logins mit ins Grab genommen. Da im nächsten Jahr sowieso ein Wechsel in der gesamten IT ansteht, wollte ich die Gelegenheit nutzen und mich mit OPNsense weiter in das Thema Firewalls einarbeiten. Ich habe schon früher mit pfSense gearbeitet und viel früher in meinen Anfängen mit IPCop.</p><p>Nachdem ich also meine Firewall gebaut und OPNsense installiert hatte, ging es an die Arbeit. Die Firewall wurde zwischen Router und Netzwerk gehängt und zunächst so konfiguriert, dass alles offen war. Danach beschäftigte ich mich zunächst mit weiteren kleinen Plugins wie AdGuard, ClamAV und CrowdSec.</p><p>Es folgten diverse Firewall-Regeln, im Prinzip erst mal alles, was man zum Surfen, Mails schreiben und versenden sowie SSH so braucht. Die Firewall lief gut, war ein paar Stunden in Betrieb und dann merkte ich so langsam, dass da noch ein Berg Arbeit auf mich wartete: Praktisch kein smartes Gerät im Haus wollte noch irgendetwas für mich tun. Licht an- und ausschalten oder Radio hören über unsere Echo-Geräte war nicht mehr möglich, unser Haus war praktisch lahm gelegt.</p><h3 id=die-ewige-suche-nach-den-richtigen-ports>Die ewige Suche nach den richtigen Ports<a hidden class=anchor aria-hidden=true href=#die-ewige-suche-nach-den-richtigen-ports>#</a></h3><p>Die Ports für die Echos waren schnell gefunden und freigeschaltet, aber vor allem unsere Steckdosen bereiteten mir Kopfzerbrechen. Ich habe (leider) einige Steckdosen von Gosund, diese schalten sowieso nur, wenn sie wollen - und die passenden Ports für unsere Modelle zu finden, war nicht einfach. Bei einigen anderen Herstellern musste ich es per Mail versuchen. Positiv hervorzuheben ist hier Hama, die innerhalb weniger Stunden sehr ausführlich auf meine Anfrage geantwortet haben. Bei anderen warte ich bis heute.</p><h3 id=die-liste-mit-allen-ports>Die Liste mit allen Ports<a hidden class=anchor aria-hidden=true href=#die-liste-mit-allen-ports>#</a></h3><p>Natürlich ist diese Liste nicht vollständig, aber sie deckt 90% der von uns verwendeten Geräte ab. Für den einen oder anderen können die Ports hilfreich sein, wenn man danach sucht.</p><table><thead><tr><th>Hersteller</th><th>Port</th><th>Protokoll</th></tr></thead><tbody><tr><td>KASA</td><td>9999</td><td>TCP</td></tr><tr><td>Tapo (bei uns im speziellen Kameras, für Steckosen ggf. nicht passend)</td><td>554</td><td>TCP</td></tr><tr><td>Gosund</td><td>51526</td><td>TCP</td></tr><tr><td>Gosund</td><td>44077</td><td>TCP</td></tr><tr><td>Smartlife/Tuya</td><td>8883</td><td>TCP</td></tr><tr><td>Smartlife/Tuya</td><td>6667-6669</td><td>TCP</td></tr><tr><td>Smartlife/Tuya</td><td>6681</td><td>TCP</td></tr><tr><td>Smartlife/Tuya</td><td>6608</td><td>TCP</td></tr><tr><td>Smartlife/Tuya</td><td>6682</td><td>TCP</td></tr><tr><td>Hama</td><td>8001</td><td>TCP</td></tr><tr><td>Hama</td><td>67-68</td><td>TCP</td></tr><tr><td>Hama</td><td>10443</td><td>TCP</td></tr><tr><td>Hama</td><td>2442</td><td>TCP</td></tr><tr><td>Hama</td><td>1443</td><td>TCP</td></tr><tr><td>Hama</td><td>8886</td><td>TCP</td></tr><tr><td>Hama</td><td>8883</td><td>TCP</td></tr><tr><td>Amazon Echo</td><td>3478 (STUN)</td><td>UDP</td></tr><tr><td>Amazon Echo</td><td>49152-65535</td><td>UDP</td></tr><tr><td>Amazon Echo</td><td>5353</td><td>UDP</td></tr><tr><td>Amazon Echo</td><td>4070</td><td>TCP + UDP</td></tr></tbody></table><h4 id=weitere-ports>Weitere Ports<a hidden class=anchor aria-hidden=true href=#weitere-ports>#</a></h4><p>Wir hatten auch das Problem, dass das Versenden von WhatsApp Nachrichten sehr lange dauerte. Das liegt daran, dass WhatsApp auf Port 443 als Fallback zurückgreift, nachdem es vorher versucht hat über Port 5222 zu kommunizieren. Dazu habe ich Aussagen in verschiedene Richtungen gefunden, die einen sagen es geht generell nur über Port 443, die anderen sagen WhatsApp versucht es erst ein paar mal über 5222. Wie auch immer, seit der Port offen ist, kommen die Nachrichten direkt bei uns an.
Daher hier noch eine kleine Liste mit &ldquo;Zusatzdiensten&rdquo;:</p><table><thead><tr><th>Anwendung</th><th>Port</th><th>Protokoll</th></tr></thead><tbody><tr><td>WhatsApp</td><td>5222</td><td>TCP</td></tr><tr><td>Microsoft Teams</td><td>3478-3481</td><td>UDP</td></tr><tr><td>Discord</td><td>50000-65535</td><td>UDP</td></tr><tr><td>Push Notifications Smartphones (ggf. nur Android)</td><td>5229-5230</td><td>TCP</td></tr><tr><td>SSH</td><td>22</td><td>TCP</td></tr></tbody></table><h5 id=schlussworte>Schlussworte<a hidden class=anchor aria-hidden=true href=#schlussworte>#</a></h5><p>Vielleicht kann ich dem einen oder anderen mit der Liste helfen. Von einigen Herstellern warte ich heute noch auf eine Antwort bzgl. der Ports, werde sie aber wohl nie bekommen, da sie irgendwo im tiefsten China sitzen. Natürlich könnte man mit Wireshark und Co. alles selbst recherchieren, aber ich bin mit den Steckdosen von Smartlife nicht nur wegen ihrer kompakten Abmessungen sehr zufrieden und werfe deshalb die letzten Kandidaten von Gosund und Co. nach und nach aus dem Haus.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/firewall/>Firewall</a></li><li><a href=http://localhost:1313/tags/opnsense/>OPNSense</a></li><li><a href=http://localhost:1313/tags/smarte-steckdosen/>Smarte Steckdosen</a></li><li><a href=http://localhost:1313/tags/hama/>Hama</a></li><li><a href=http://localhost:1313/tags/amazon-echo/>Amazon Echo</a></li><li><a href=http://localhost:1313/tags/smartlife/>Smartlife</a></li><li><a href=http://localhost:1313/tags/tuya/>Tuya</a></li><li><a href=http://localhost:1313/tags/smarthome/>Smarthome</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/erster_testbeitrag/><span class=title>Next »</span><br><span>Mein erster Beitrag</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Christian Weber</a></span> ·
<span><a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> ·
<a href=/pages/legal/impressum rel=noopener>Impressum</a> · <a href=/pages/legal/datenschutz rel=noopener>Datenschutz</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>